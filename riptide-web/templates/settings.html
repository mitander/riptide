<div class="settings">
    <h1>Server Settings</h1>

    <form class="settings-form" onsubmit="saveSettings(event)">
        <div class="settings-section">
            <h2>Network Settings</h2>

            <div class="form-group">
                <label for="download-limit">Download Limit (KB/s):</label>
                <input type="number" id="download-limit" name="download_limit"
                       value="{{settings.download_limit}}" class="form-input">
                <small>Leave empty for unlimited</small>
            </div>

            <div class="form-group">
                <label for="upload-limit">Upload Limit (KB/s):</label>
                <input type="number" id="upload-limit" name="upload_limit"
                       value="{{settings.upload_limit}}" class="form-input">
                <small>Leave empty for unlimited</small>
            </div>

            <div class="form-group">
                <label for="max-connections">Max Connections:</label>
                <input type="number" id="max-connections" name="max_connections"
                       value="{{settings.max_connections}}" class="form-input">
            </div>
        </div>

        <div class="settings-section">
            <h2>Server Ports</h2>

            <div class="form-group">
                <label for="streaming-port">Streaming Port:</label>
                <input type="number" id="streaming-port" name="streaming_port"
                       value="{{settings.streaming_port}}" class="form-input">
            </div>

            <div class="form-group">
                <label for="web-ui-port">Web UI Port:</label>
                <input type="number" id="web-ui-port" name="web_ui_port"
                       value="{{settings.web_ui_port}}" class="form-input">
            </div>
        </div>

        <div class="settings-section">
            <h2>Protocol Settings</h2>

            <div class="form-group">
                <label>
                    <input type="checkbox" id="enable-upnp" name="enable_upnp"
                           {{#if settings.enable_upnp}}checked{{/if}}>
                    Enable UPnP
                </label>
            </div>

            <div class="form-group">
                <label>
                    <input type="checkbox" id="enable-dht" name="enable_dht"
                           {{#if settings.enable_dht}}checked{{/if}}>
                    Enable DHT
                </label>
            </div>

            <div class="form-group">
                <label>
                    <input type="checkbox" id="enable-pex" name="enable_pex"
                           {{#if settings.enable_pex}}checked{{/if}}>
                    Enable Peer Exchange
                </label>
            </div>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary">Save Settings</button>
            <button type="button" class="btn btn-secondary" onclick="resetSettings()">Reset</button>
        </div>
    </form>

    <div id="settings-result" class="result-message" style="display: none;"></div>

    <script>
        function saveSettings(event) {
            event.preventDefault();

            const resultDiv = document.getElementById('settings-result');
            resultDiv.className = 'result-message success';
            resultDiv.textContent = 'Settings saved successfully!';
            resultDiv.style.display = 'block';

            setTimeout(() => {
                resultDiv.style.display = 'none';
            }, 3000);
        }

        function resetSettings() {
            if (confirm('Reset all settings to defaults?')) {
                location.reload();
            }
        }
    </script>
</div>